const test=__GLOBAL_ASYNC_TO_PROMISES__._async(function(v){let _interrupt=false;let messages=[];return __GLOBAL_ASYNC_TO_PROMISES__._continue(__GLOBAL_ASYNC_TO_PROMISES__._switch(v,[[function(){return'case1';},function(){messages.push('case1Start');return __GLOBAL_ASYNC_TO_PROMISES__._await(wait(messages),function(){messages.push('case1Stop');_interrupt=true;});}],[function(){return'case2';},function(){messages.push('case2Start');return __GLOBAL_ASYNC_TO_PROMISES__._await(wait(messages),function(){messages.push('case2Stop');});},__GLOBAL_ASYNC_TO_PROMISES__._empty],[function(){return'case3';},function(){messages.push('case3Start');return __GLOBAL_ASYNC_TO_PROMISES__._await(wait(messages),function(){messages.push('case3Stop');_interrupt=true;});}]]),function(){return messages;});});return Promise.all([test('case1'),test('case2'),test('case3')]);function wait(messages){messages.push('waitStart');return new Promise((resolve,reject)=>setTimeout(resolve,0)).then(()=>{messages.push('waitStop');});}